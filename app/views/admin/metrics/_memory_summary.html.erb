<% metrics = JobPerformanceMetric.recent %>

<div class="memory-summary">
  <h4>Last 24 Hours</h4>
  
  <ul>
    <li>Peak Memory: <%= metrics.maximum(:peak_memory_mb)&.round(2) || 0 %> MB</li>
    <li>Avg Memory: <%= metrics.average(:average_memory_mb)&.round(2) || 0 %> MB</li>
    <li>Jobs Run: <%= metrics.count %></li>
  </ul>

  <% metrics.group(:job_type).count.each do |job_type, count| %>
    <div class="job-type-stats">
      <h5><%= job_type %></h5>
      <p>Count: <%= count %></p>
      <p>Avg Duration: <%= metrics.where(job_type: job_type).average(:duration_seconds)&.round(2) || 0 %>s</p>
    </div>
  <% end %>
</div> 
